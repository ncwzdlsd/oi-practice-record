- [P1962 斐波那契数列](https://www.luogu.com.cn/problem/P1962)

  矩阵加速。

  有递推式;
  $$
  \begin{cases}
  f_{n}=f_{n-1}\times 1+f_{n-2}\times 1\\
  f_{n-1}=f_{n-1}\times 1+f_{n-2}\times 0
  \end{cases}
  $$
  于是有
  $$
  \begin{bmatrix}f_n&f_{n-1}\end{bmatrix}=\begin{bmatrix}1&1\\1&0\end{bmatrix}^{n-2}\times\begin{bmatrix}f_2&f_1\end{bmatrix}
  $$
  结构体中重载矩阵乘法的 `*` 运算符即可。

  注意特判 $f_1=1,f_2=1$。

  ```cpp
  #include <bits/stdc++.h>
  using namespace std;
  
  const int mod=1e9+7;
  
  struct mat
  {
  	int a[3][3];
  	mat(){memset(a,0,sizeof a);}
  	mat operator * (const mat &b) const
  	{
  		mat res;
  		for(int i=1;i<=2;i++)
  			for(int j=1;j<=2;j++)
  				for(int k=1;k<=2;k++)
  					res.a[i][j]=(res.a[i][j]+a[i][k]*b.a[k][j])%mod;
  		return res;
  	}
  }ans,ba;
  
  void init()
  {
  	ba.a[1][1]=ba.a[1][2]=ba.a[2][1]=1;
  	ans.a[1][1]=ans.a[1][2]=1;
  }
  
  void quickpow(int b)
  {
  	while(b)
  	{
  		if(b&1) ans=ans*ba;
  		b>>=1,ba=ba*ba;
  	}
  }
  
  int main()
  {
  	int n;cin>>n;
  	if(n<=2) cout<<1,exit(0);
  	init();
  	quickpow(n-2);
  	cout<<(ans.a[1][1]%mod);
  	return 0;
  }
  ```

  