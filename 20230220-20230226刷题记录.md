---
title: 20230220~20230226åˆ·é¢˜è®°å½•
date: 2023-02-20 17:03:33
tags:
- KMP
- å­—å…¸æ ‘
- çº¿æ€§åŸº
- æœ€çŸ­è·¯
- ç”Ÿæˆæ ‘
- å¹¶æŸ¥é›†
- BFS
categories: åˆ·é¢˜è®°å½•
url: record-20230220to20230226
excerpt: KMPã€å­—å…¸æ ‘ã€æœ€å°ç”Ÿæˆæ ‘ã€åˆ†å±‚æœ€çŸ­è·¯
---

## 20230220

- [ä¼¼ä¹åœ¨æ¢¦ä¸­è§è¿‡çš„æ ·å­](https://hydro.ac/d/bzoj/p/3620) | [å­ä¸²æ‹†åˆ†](http://noip.ybtoj.com.cn/contest/659/problem/4)

  ![](https://photo-1314795557.cos.ap-beijing.myqcloud.com/image-20230220133140803.png)

  ä¸€é“ KMP çš„å¦™ç”¨é¢˜ã€‚`memset` èµ‹ $0$ çš„æ—¶å€™å†™æˆäº† `sizeof(0)`ï¼Œæ²¡è®°é”™çš„æ—¶å€™åº”è¯¥ä¸æ˜¯ç¬¬ä¸€æ¬¡çŠ¯è¿™ç§ä½çº§é”™è¯¯äº†ğŸ˜­ã€‚å…ˆæšä¸¾å·¦ç«¯ç‚¹é¢„å¤„ç†å‡ºæ¯ä¸ªå·¦ç«¯ç‚¹èµ·å§‹çš„å­—ç¬¦ä¸²ã€‚å¯¹äºå½¢å¦‚ $\texttt{ABA}$ è¿™æ ·çš„å­—ç¬¦ä¸²ï¼Œæˆ‘ä»¬å¯ä»¥è·‘ä¸€ä¸‹ KMPï¼Œç»Ÿè®¡å‡ºå®ƒçš„ `nxt` æ•°ç»„ï¼Œå¦‚æœåŒºé—´æœ‰ç›¸äº¤çš„éƒ¨åˆ†ï¼Œæ˜¾ç„¶ä¸æ»¡è¶³æ¡ä»¶ã€‚å½“ç„¶è¿™é‡Œçš„ `nxt` æ˜¯æœ€é•¿ Border çš„é•¿åº¦ï¼Œæˆ‘ä»¬è¦ç»§ç»­è·³ï¼ˆè¯¦è§[å¤±é…æ ‘](https://ncwzdlsd.top/articles/fail-tree)çš„æ€æƒ³ï¼‰ï¼Œæ‰¾åˆ°æ¯ä¸€ä¸ª Borderï¼Œç´¯åŠ  `ans`ã€‚åªè¦ä¿è¯ `nxt` æ²¡æœ‰ç›¸äº¤åŒºé—´å³å¯ã€‚å…³äºå¦‚ä½•åˆ¤æ–­æ˜¯å¦æœ‰ç›¸äº¤åŒºé—´ï¼Œå¯¹äºä¸€ä¸ªé•¿åº¦ä¸º $n$ çš„åŒºé—´ï¼Œéœ€è¦æ»¡è¶³ `2*nxt[n]<n` æ‰èƒ½ä¿è¯æ»¡è¶³æ¡ä»¶ã€‚

  æ—¶é—´å¤æ‚åº¦ $O(n^2)$ã€‚

  ```cpp
  #include <bits/stdc++.h>
  using namespace std;
  #define int long long
  
  int nxt[15005],k,ans;
  char S[15005],now[15005];
  
  signed main()
  {
  	scanf("%s%lld",S+1,&k);
  	int n=strlen(S+1);
  	for(int l=1;l<=n;l++)
  	{
  		// memset(nxt,0,sizeof(nxt));
  		// memset(now,0,sizeof(now));
  		for(int i=1;i<=n;i++) nxt[i]=0,now[i]=0;
  		for(int i=1;l+i-1<=n;i++)
  			now[i]=S[l+i-1];//æ„é€ nowæ•°ç»„ä¸ºä»iå¼€å§‹çš„å­—ç¬¦ä¸²
  		int nn=strlen(now+1);
  		for(int i=1,j=0;i<=nn;i++)
  		{
  			while(j&&now[i+1]!=now[j+1]) j=nxt[j];
  			if(now[i+1]==now[j+1]) j++;
  			nxt[i+1]=j;
  		}
  		//æš´åŠ›æšä¸¾å³ç«¯ç‚¹ï¼Œçœ‹èƒ½å¦æ»¡è¶³
  		for(int i=1,j=0;i<=nn;i++)
  		{
  			//ä»ç¬¬ä¸€ä½å¼€å§‹åŒ¹é…ï¼Œä¸æ˜¯i+1æ˜¯i
  			while(j&&now[i+1]!=now[j+1]) j=nxt[j];
  			if(now[i+1]==now[j+1]) j++;
  			while(j*2>=i+1) j=nxt[j];//
  			if(j>=k) ans++;
  		}
  	}
  	printf("%lld",ans);
  	return 0;
  }
  ```

- [P3812 ã€æ¨¡æ¿ã€‘çº¿æ€§åŸº](https://www.luogu.com.cn/problem/P3812)

  [Portal.](https://blog.csdn.net/ncwzdlsd/article/details/133969795#t0)ã€‚

  ```cpp
  #include <bits/stdc++.h>
  using namespace std;
  #define int long long
  
  int p[55];
  
  void insert(int x)
  {
      for(int i=50;i>=0;--i)
          if(x>>i&1)
          {
              if(!p[i]) {p[i]=x;break;}
              else x^=p[i];
          }
  }
  
  int pmax()
  {
      int ans=0;
      for(int i=50;i>=0;--i)
  		if((ans^p[i])>ans) ans^=p[i];
  	return ans;
  }
  
  signed main()
  {
  	int n,x;cin>>n;
  	for(int i=1;i<=n;i++) cin>>x,insert(x);
  	cout<<pmax();
  	return 0;
  }
  ```


- [143. æœ€å¤§å¼‚æˆ–å¯¹](https://www.acwing.com/problem/content/145/)

  åˆ¤æ–­ç¬¬ $i$ ä½æ˜¯ $0$ è¿˜æ˜¯ $1$ æ—¶ï¼Œåº”è¯¥ç”¨ `x>>i&1`ï¼Œå¦‚æœæ˜¯ $1$ åˆ™ä¸º $1$ï¼Œå¦åˆ™ä¸º $0$ã€‚

  ```cpp
  #include <bits/stdc++.h>
  using namespace std;
  
  // 01å­—å…¸æ ‘ï¼Œç”±äºè¦æ‰¾æœ€å¤§å¼‚æˆ–å’Œï¼Œå¯¹äºæ¯ä¸€ä¸ªèŠ‚ç‚¹è½¬åŒ–ä¸ºäºŒè¿›åˆ¶ï¼Œä¸åœåœ°æ‰¾ä¸å®ƒç›¸åçš„èŠ‚ç‚¹å‘ä¸‹é€’å½’ï¼Œ
  // å¦åˆ™ç»§ç»­é€’å½’å­æ ‘
  
  const int maxn=1e5+5,maxm=4*1e6+5;
  int a[maxn],t[maxm][2],tot;
  
  void insert(int x)
  {
  	int p=0;//æ ¹èŠ‚ç‚¹ä¸º0
  	for(int i=30;i>=0;--i)//é«˜ä½çš„è´¡çŒ®ä¼˜å…ˆ
  	{
  		int qwq=x>>i&1;
  		if(!t[p][qwq]) t[p][qwq]=++tot;
  		p=t[p][qwq];
  	}
  }
  
  int query(int x)
  {
  	int res=0,p=0;
  	for(int i=30;i>=0;--i)
  	{
  		int qwq=x>>i&1;
  		if(t[p][!qwq]) p=t[p][!qwq],res=res*2+!qwq;
          else p=t[p][qwq],res=res*2+qwq;
  	}
  	return res;
  }
  
  int main()
  {
  	int N,ans=0;cin>>N;
  	for(int i=1;i<=N;i++) cin>>a[i];
  	for(int i=1;i<=N;i++) insert(a[i]),ans=max(ans,query(a[i])^a[i]);
  	cout<<ans;
  	return 0;
  }
  ```


- [é€ä¸ªå‡»ç ´](http://noip.ybtoj.com.cn/contest/662/problem/5)

  ![](https://photo-1314795557.cos.ap-beijing.myqcloud.com/image-20230220232020301.png)

  å·²çŸ¥ä¸€äº›ç‚¹ï¼Œæ±‚ä½¿å…¶ä¸è¿é€šçš„æœ€å°ä»£ä»·ã€‚ç‰¹æ®Šå¹¶æŸ¥é›†ï¼Œéœ€è¦æ”¯æŒåˆ è¾¹æ“ä½œï¼Œè€ƒè™‘æ­£éš¾åˆ™åã€‚

  èŠ±è´¹æœ€å°ä»£ä»·åˆ è¾¹ç­‰äºèŠ±è´¹æœ€å¤§ä»£ä»·å»ºè¾¹ï¼ŒæŒ‰ç…§è¾¹æƒä»å¤§åˆ°å°å»ºå›¾ã€‚
  
  > ç‰¹æ®Šè€ƒè™‘ï¼šå¦‚æœæˆ‘æ–¹èŠ‚ç‚¹ä¸æ•ŒäººèŠ‚ç‚¹ç›¸è¿ï¼Œä¸ºäº†ä¸è®©å…¶ä»–æ•ŒäººèŠ‚ç‚¹é€šè¿‡æˆ‘æ–¹èŠ‚ç‚¹ä¸æ•Œäººç›¸è¿ï¼Œæ ‡è®°ä¸æ•Œäººç›¸è¿çš„æˆ‘æ–¹èŠ‚ç‚¹ä¸ºæ•ŒäººèŠ‚ç‚¹ã€‚
  
  åŸå¸‚ç¼–å·ä» $0$ å¼€å§‹ï¼Œæ‰€ä»¥å¹¶æŸ¥é›†åˆå§‹åŒ–è¦åˆå§‹åŒ– $0<i<N$ è¿™æ®µåŒºé—´ã€‚
  
  ```cpp
  #include <bits/stdc++.h>
  using namespace std;
  #define int long long
  
  const int maxn=1e6+5;
  int fa[maxn],N,M,K,d[maxn],qwq,sum;
  
  int find(int x)
  {
  	if(fa[x]!=x) fa[x]=find(fa[x]);
  	return fa[x];
  }
  
  struct node
  {
  	int u,v,w;
  }e[maxn];
  
  bool cmp(node a,node b)
  {
  	return a.w>b.w;
  }
  
  signed main()
  {
  	cin>>N>>M>>K;
  	for(int i=0;i<N;i++) fa[i]=i;
  	for(int i=1;i<=K;i++) cin>>qwq,d[qwq]=1;
  	for(int i=1;i<=M;i++) cin>>e[i].u>>e[i].v>>e[i].w,sum+=e[i].w;
  	sort(e+1,e+M+1,cmp);
  	for(int i=1;i<=M;i++)
  	{
  		int u=e[i].u,v=e[i].v;
  		int fu=find(u),fv=find(v);
  		if(fu==fv) {sum-=e[i].w;continue;}
  		else if(!d[fu]||!d[fv])
  		{
  			sum-=e[i].w;
  			if(!d[fu]) fa[fu]=fv;
  			else fa[fv]=fu;
  		}
  	}
  	cout<<sum;
  	return 0;
  }
  ```

## 20230221


- [#10066. æ–°çš„å¼€å§‹](https://loj.ac/p/10066)

  è¶…çº§æºç‚¹ï¼Œåœ¨æ¯ä¸€ä¸ªèŠ‚ç‚¹å»ºå‘ç”µç«™ï¼Œç›¸å½“äºä»è¶…çº§æºç‚¹å‘è¯¥å‘ç”µç«™è¿è¾¹è¾¹æƒä¸º $p_i$ çš„è¾¹ã€‚

  æ³¨æ„æ•°ç»„å¤§å°ã€‚
  
  ```cpp
  #include <bits/stdc++.h>
  using namespace std;
  
  // 
  // ç‚¹æƒè½¬åŒ–ä¸ºè¶…çº§æºç‚¹çš„è¾¹æƒ
  
  const int maxn=2e5+5;
  int n,cnt=1/*è¾¹æ•°*/,fa[maxn];
  
  struct node{int from,to,vv;}gg[maxn];
  
  bool cmp(node a,node b)
  {
  	return a.vv<b.vv;
  }
  
  int find(int x)
  {
  	if(x!=fa[x]) fa[x]=find(fa[x]);
  	return fa[x];
  }
  
  int main()
  {
  	cin>>n;
  	int w,ans=0;
  	for(int i=1;i<=n;i++) cin>>w,gg[cnt++]={0,i,w},gg[cnt++]={i,0,w};
  	for(int i=1;i<=n;i++)
  		for(int j=1;j<=n;j++) cin>>w,gg[cnt++]={i,j,w},gg[cnt++]={j,i,w};
  	sort(gg+1,gg+cnt+1,cmp);
  	for(int i=0;i<=n;i++) fa[i]=i;
  	for(int i=1;i<cnt;i++)
  	{
  		int u=gg[i].from,v=gg[i].to,ww=gg[i].vv;
  		int fu=find(u),fv=find(v);
  		if(fu!=fv) fa[fu]=fv,ans+=ww;
  	}
  	cout<<ans;
  	return 0;
  }
  ```

## 20230222

- [æœ€ä¼˜è´¸æ˜“](https://www.luogu.com.cn/problem/P1073)

  åˆ†å±‚å›¾+SPFAæœ€é•¿è·¯ã€‚

  å¯¹äºæ¯ä¸€å±‚å›¾å»ºç«‹ä¸€ä¸ªè¶…çº§æºç‚¹ $0$ï¼ˆç±»ä¼¼çš„æ€ç»´åœ¨è½¬ç‚¹æƒä¸ºè¾¹æƒä¸­ä¹Ÿæœ‰åº”ç”¨ï¼‰ï¼Œè¡¨ç¤ºæ—…é€”çš„ç»“æŸï¼Œå¯ä»¥çŸ¥é“ç¬¬ä¸€å±‚ç»“æŸçš„ä»£ä»·æ˜¯ $0$ï¼Œç¬¬äºŒå±‚ç»“æŸçš„ä»£ä»·æ˜¯ $w_n$ï¼Œç¬¬ä¸‰å±‚ç»“æŸçš„ä»£ä»·æ˜¯ $0$ã€‚

  æ³¨æ„æ•°ç»„å¤§å°ã€‚
  
  ![](https://photo-1314795557.cos.ap-beijing.myqcloud.com/bb8c1e99d6fe2426e274dfb54fa8f2c7.png)
  
  ```cpp
  #include <bits/stdc++.h>
  using namespace std;
  
  const int maxn=2e6+5;
  int head[maxn],dis[maxn],nxt[maxn],w[maxn],to[maxn],cnt,n,m,e[maxn];
  bool vis[maxn];
  
  void add(int x,int y,int z)
  {
  	to[++cnt]=y;
  	w[cnt]=z;
  	nxt[cnt]=head[x];
  	head[x]=cnt;
  }
  
  queue<int> q;
  
  void spfa()
  {
  	memset(dis,-0x3f,sizeof(dis));
  	dis[1]=0;vis[1]=1;q.push(1);
  	while(!q.empty())
  	{
  		int u=q.front();q.pop();vis[u]=0;
  		for(int i=head[u];i;i=nxt[i])
  			if(dis[to[i]]<dis[u]+w[i]) 
  			{
  				dis[to[i]]=dis[u]+w[i];
  				if(!vis[to[i]]) vis[to[i]]=1,q.push(to[i]);
  			}
  	}
  }
  
  int main()
  {
  	cin>>n>>m;
  	for(int i=1;i<=n;i++) cin>>e[i];
  	for(int i=1,x,y,z;i<=m;i++)
  	{
  		cin>>x>>y>>z;
  		add(x,y,0),add(x+n,y+n,0),add(x+2*n,y+2*n,0),add(x,y+n,-e[x]),add(x+n,y+2*n,e[x]);
          if(z==2) swap(x,y),add(x,y,0),add(x+n,y+n,0),add(x+2*n,y+2*n,0),add(x,y+n,-e[x]),add(x+n,y+2*n,e[x]); 
  	}
  	//å»ºç«‹è¶…çº§æºç‚¹0è¡¨ç¤ºæ—…é€”ç»“æŸ
  	add(n,0,0);
      add(n*2,0,e[n]);//ç›´æ¥ä¹°å…¥nå·æ°´æ™¶çƒç»“æŸæ—…ç¨‹
      add(n*3,0,0);
  	spfa();
  	cout<<dis[0]<<endl;
  	return 0;
  }
  ```


## 20230225

- [P1379 å…«æ•°ç éš¾é¢˜](https://www.luogu.com.cn/problem/P1379)

  ç»å…¸ BFSã€‚åŠ äº†ä¸€ä¸ªè¾“å‡ºæ¯ä¸€æ­¥ç§»åŠ¨çš„åŠŸèƒ½ï¼Œåˆ©ç”¨ç±»ä¼¼é“¾å‰çš„æ€æƒ³è·³ `fa`ã€‚

  æ³¨æ„æ•°ç»„å¤§å°ã€‚
  
  ```cpp
  #include <bits/stdc++.h>
  using namespace std;
  
  int gg[5][5],cnt;
  const int dx[]={-1,0,0,1},dy[]={0,-1,1,0};
  
  struct node
  {
  	int fa,v;
  }ans[1000005];
  queue<node> q;
  
  void write(int x)
  {
  	if(!x) return;
  	write(ans[x].fa);
  	if(ans[x].v<100000000) cout<<"0"<<ans[x].v<<endl;
  	else cout<<ans[x].v<<endl;
  }
  
  int main()
  {
  	int n;cin>>n;q.push(node{0,n});
  	map<int,int> m;m[n]=0;
  	while(!q.empty())
  	{
  		node qq=q.front();q.pop();
  		ans[++cnt]=qq;
  		int u=qq.v;int sx,sy;
  		if(u==123804765) break;
  		int tmp=u;
  		for(int i=3;i;i--)
  			for(int j=3;j;j--)
  			{
  				gg[i][j]=tmp%10,tmp/=10;
  				if(!gg[i][j]) sx=i,sy=j;
  			}
  		for(int i=0;i<4;i++)
  		{
  			int nx=sx+dx[i],ny=sy+dy[i],now=0;
  			if(nx<1||nx>3||ny<1||ny>3) continue;
  			swap(gg[nx][ny],gg[sx][sy]);
  			for(int i=1;i<=3;i++)
  				for(int j=1;j<=3;j++) now=now*10+gg[i][j];
  			if(!m.count(now))
  				m[now]=m[u]+1,q.push(node{cnt,now});
  			swap(gg[nx][ny],gg[sx][sy]);//å¤åŸ
  		}
  	}
  	write(cnt);
  	return 0;
  }
  ```
  
  
